<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="pragma" content="no-cache"/>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta charset="utf-8"/>
    <title>The Pizza Edition</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="game-frame">
            <canvas id="canvas">
                <p>Your browser doesn't support HTML5 canvas.</p>
            </canvas>
        </div>
        <h1>POLYTRACK</h1>
        <p>By: Creator</p>
        <div class="button-container">
            <button onclick="startGame()">PLAY NOW!</button>
            <button onclick="toggleFullscreen()">FULL SCREEN</button>
            <button onclick="refreshPage()">REFRESH</button>
        </div>
    </div>

    <!-- Load the game script but don't start it immediately -->
    <script src="html5game/RetroBowl.js" defer></script>

    <script>
        let gameStarted = false; // Track if the game has started

        function startGame() {
            if (!gameStarted) { // Only allow the game to start once
                gameStarted = true;

                const canvas = document.getElementById('canvas');
                canvas.width = window.innerWidth;  // Set to full window width
                canvas.height = window.innerHeight; // Set to full window height

                if (typeof GameMaker_Init === "function") {
                    GameMaker_Init(); // Start the game function in RetroBowl.js
                } else {
                    console.error("GameMaker_Init function not found in RetroBowl.js");
                }
            } else {
                console.log("Game already started.");
            }
        }

        function toggleFullscreen() {
            const container = document.querySelector(".container");
            if (!document.fullscreenElement) {
                container.requestFullscreen().catch(err => {
                    console.error(`Error attempting to enable full-screen mode: ${err.message}`);
                });
            } else {
                document.exitFullscreen();
            }
        }

        function refreshPage() {
            location.reload(); // Reloads the page to reset the game
        }
    </script>
</body>
</html>
